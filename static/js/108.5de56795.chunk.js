"use strict";(self.webpackChunkhuman_atlas=self.webpackChunkhuman_atlas||[]).push([[108],{6363:(e,t,n)=>{n.d(t,{$s:()=>s,Ah:()=>i,OF:()=>a});var r=n(6654);async function a(){try{const e=await(0,r.A)("/v1/categories/get-mains/");return e.sort(((e,t)=>e.name.localeCompare(t.name))),e}catch(e){return console.error("Error fetching categories: ",e.message),[]}}async function s(e){try{return await(0,r.A)(`/v1/categories/get/${e}`)}catch(t){return console.error("Error fetching categories: ",t.message),[]}}async function i(e){const t={name:e,categoryid:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null},n=Object.fromEntries(Object.entries(t).filter((e=>{let[t,n]=e;return null!==n})));try{return await(0,r.A)("/v1/categories/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(a){return console.error("Error adding category:",a.message),null}}},3541:(e,t,n)=>{n.d(t,{$:()=>a,F:()=>s});var r=n(6654);async function a(e){try{const t=await(0,r.A)(`/v1/organs/get/${e}`);if(t.error)throw new Error(t.error||"Failed to add point");return t}catch(t){console.error("Error fetching organ by organ ID:",t.message)}}async function s(e){try{const t=await(0,r.A)(`/v1/organs/get-by-categoryid/${e}`);if(t.error)throw new Error(t.error||"Failed to add point");return t}catch(t){console.error("Error fetching organ by organs ID:",t.message)}}},1215:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(5043),a=n(3216),s=n(5475),i=n(6363),o=n(579);function c(){return(0,o.jsx)("div",{className:"skeleton-breadcrumbs",children:(0,o.jsx)("div",{className:"skeleton-breadcrumb"})})}const l=function(){const e=(0,a.zy)(),{categoryid:t}=(0,a.g)(),[n,l]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),p=e.pathname.split("/").filter(Boolean),m={admin:"\u0410\u0434\u043c\u0438\u043d-\u043f\u0430\u043d\u0435\u043b\u044c",slide:"\u0421\u043b\u0430\u0439\u0434",categories:"\u0420\u0430\u0437\u0434\u0435\u043b\u044b","human-atlas":"\u0413\u0438\u0441\u0442\u043e \u0410\u0442\u043b\u0430\u0441"};if((0,r.useEffect)((()=>{t&&!isNaN(t)?(0,i.$s)(t).then((e=>{e&&l(e.name)})).catch((()=>l(null))).finally((()=>u(!1))):u(!1)}),[t]),d)return(0,o.jsx)(c,{});const h=p.map(((e,a)=>{const i=`/${p.slice(0,a+1).join("/")}`,c=a===p.length-1;let l=m[e]||decodeURIComponent(e);return c&&n&&e===t&&(l=n),(0,o.jsxs)(r.Fragment,{children:[c?(0,o.jsx)("span",{className:"breadcrumb-active",children:l}):(0,o.jsx)(s.N_,{to:i,className:"breadcrumb-link",children:l}),!c&&(0,o.jsx)("span",{className:"breadcrumb-separator",children:" > "})]},i)}));return(0,o.jsx)("nav",{className:"breadcrumbs",children:h})};var d=n(2562),u=n(1880);n(5062);function p(e){let{title:t,children:n}=e;const s=(0,a.Zp)();return(0,r.useEffect)((()=>{const e=u.A.get("user");if(e)try{JSON.parse(e).isAdmin||s("/human-atlas/")}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043a\u0443\u043a\u0438 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c:",t),s("/human-atlas/")}else s("/human-atlas/")}),[s]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.A,{}),(0,o.jsx)("div",{className:"admin-wrapper",children:(0,o.jsxs)("div",{className:"admin-container",children:[(0,o.jsxs)("div",{className:"admin-header",children:[(0,o.jsx)(l,{}),(0,o.jsx)("div",{className:"menu-title",children:t})]}),n]})})]})}},6333:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(3216),a=n(1215),s=n(5043),i=n(4524),o=n(7628),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)},l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},d=(0,o.J)("ClockLoader","100% { transform: rotate(360deg) }","rotate");const u=function(e){var t=e.loading,n=void 0===t||t,r=e.color,a=void 0===r?"#000000":r,o=e.speedMultiplier,u=void 0===o?1:o,p=e.cssOverride,m=void 0===p?{}:p,h=e.size,f=void 0===h?50:h,v=l(e,["loading","color","speedMultiplier","cssOverride","size"]),g=(0,i.L)(f),x=g.value,y=g.unit,j=c({display:"inherit",position:"relative",width:"".concat(x).concat(y),height:"".concat(x).concat(y),backgroundColor:"transparent",boxShadow:"inset 0px 0px 0px 2px ".concat(a),borderRadius:"50%"},m),b={position:"absolute",backgroundColor:a,width:"".concat(x/3,"px"),height:"2px",top:"".concat(x/2-1,"px"),left:"".concat(x/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(d," ").concat(8/u,"s linear infinite")},N={position:"absolute",backgroundColor:a,width:"".concat(x/2.4,"px"),height:"2px",top:"".concat(x/2-1,"px"),left:"".concat(x/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(d," ").concat(2/u,"s linear infinite")};return n?s.createElement("span",c({style:j},v),s.createElement("span",{style:N}),s.createElement("span",{style:b})):null};var p=n(5784),m=n(6654);var h=n(7509),f=n(6065),v=n(579);function g(e){let{img:t,title:n,status:a,path:i,id:o,onDelete:c}=e;const[l,d]=(0,s.useState)(!1),[g,x]=(0,s.useState)(!1),y=(0,r.Zp)(),{showNotification:j}=(0,f.h)();return(0,v.jsxs)("div",{className:"slide-item",children:[(0,v.jsx)("div",{className:"slide-container",children:(0,v.jsxs)("div",{className:"slide-content",children:[(0,v.jsxs)("div",{className:"slide-header",children:[(()=>{switch(a){case"PROCESSING":return(0,v.jsxs)("div",{className:"slide-status",children:[(0,v.jsx)(u,{size:16,color:"#EDB337"}),(0,v.jsx)("span",{children:"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435"})]});case"DONE":return(0,v.jsx)("div",{});case"ERROR":return(0,v.jsx)("div",{className:"slide-status slide-error",children:(0,v.jsx)("span",{children:"\u2715 \u041e\u0448\u0438\u0431\u043a\u0430"})});default:return(0,v.jsx)("span",{children:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"})}})(),"PROCESSING"!==a&&(0,v.jsx)("button",{className:"slide-delete-button",onClick:()=>x(!0),disabled:l,children:l?(0,v.jsx)(p.A,{size:12,color:"#fff"}):"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),(0,v.jsxs)("div",{className:"slide-info",children:[(0,v.jsx)("div",{className:"slide-title",children:n}),"DONE"===a&&(0,v.jsx)("button",{className:"slide-edit-button",onClick:()=>{y(i)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})}),(0,v.jsx)("img",{className:"slide-background",src:t,alt:"img"}),(0,v.jsx)(h.A,{isOpen:g,onClose:()=>x(!1),onConfirm:async()=>{d(!0);try{await async function(e){try{const t=await(0,m.A)("/v1/organs/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(t.error)throw new Error("Failed to delete point");return t}catch(t){throw new Error("Error deleting organ:",t.message)}}(o),c&&c(o)}catch(e){console.error("Error deleting slide:",e),j("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043b\u0430\u0439\u0434","error")}finally{d(!1),x(!1)}},title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",actionName:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",actionColor:"red",message:`\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043b\u0430\u0439\u0434 "${n}"?`})]})}var x=n(3541);n(5062);function y(e){let{count:t=5}=e;return(0,v.jsx)("ul",{className:"skeleton-list",children:Array.from({length:t}).map(((e,t)=>(0,v.jsx)("li",{className:"skeleton-slide-item"},t)))})}var j=n(4545);n(6936);var b=n(2176);function N(e){let{onClose:t,onAddSlide:n,categoryId:r}=e;const[a,i]=(0,s.useState)(!1),[o,c]=(0,s.useState)("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b .svs"),{showNotification:l}=(0,f.h)();return(0,v.jsx)(j.A,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043b\u0430\u0439\u0434",onClose:t,children:(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=e.target.elements.slideName.value.trim(),s=e.target.elements.fileInput.files[0];if(!a||!s)return void l("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b","error");if("svs"!==s.name.split(".").pop().toLowerCase())return void l("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0441 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\u043c .svs","error");const o=new FormData;o.append("name",a),o.append("categoryid",r),o.append("file",s),i(!0);try{const e=await async function(e){try{const t=await(0,m.A)("/v1/organs/add",{method:"POST",body:e});if(t.error)throw new Error(t.error||"Failed to add organ");return t}catch(t){throw t}}(o);e?(n(e),t(),l("\u0421\u043b\u0430\u0439\u0434 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d","info")):l("\u0421\u043b\u0430\u0439\u0434 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435","error")}catch(c){return c instanceof b.q?l("\u0412\u0435\u0441 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 4\u0413\u0411","error"):l("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u043b\u0430\u0439\u0434\u0430","error")}finally{i(!1)}},className:"modal-form",children:[(0,v.jsxs)("div",{className:"form-group",children:[(0,v.jsx)("label",{htmlFor:"slideName",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043b\u0430\u0439\u0434\u0430"}),(0,v.jsx)("input",{id:"slideName",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})]}),(0,v.jsx)("div",{className:"form-group",children:(0,v.jsxs)("div",{className:"file-input-wrapper",children:[(0,v.jsx)("input",{id:"fileInput",type:"file",accept:".svs",className:"hidden-file-input",onChange:e=>{const t=e.target.files[0];c(t?t.name:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b .svs")}}),(0,v.jsxs)("div",{className:"file-input-label",children:[(0,v.jsx)("button",{type:"button",className:"file-input-button",onClick:()=>document.getElementById("fileInput").click(),children:"\u041e\u0431\u0437\u043e\u0440"}),(0,v.jsx)("span",{className:"file-input-text",children:o})]})]})}),(0,v.jsx)("div",{className:"form-group",children:(0,v.jsx)("button",{type:"submit",className:"submit-button",disabled:a,children:a?(0,v.jsx)(p.A,{size:14,color:"#fff"}):"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})})}function w(){const{categoryid:e}=(0,r.g)(),[t,n]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0),[c,l]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),[p,m]=(0,s.useState)(null),h=(0,s.useCallback)((async()=>{try{const t=await(0,x.F)(e);t.length>0?(n(t),m(null)):m("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e :(")}catch(t){l(t.message||"Unexpected error occurred.")}finally{o(!1)}}),[e]);(0,s.useEffect)((()=>{h()}),[h]),(0,s.useEffect)((()=>{if(t.some((e=>"PROCESSING"===e.status))){const e=setInterval((()=>{h()}),2500);return()=>clearInterval(e)}}),[t,h]);const f=e=>{n((t=>t.filter((t=>t.id!==e))))};return i?(0,v.jsx)(a.A,{title:"\u0420\u0430\u0437\u0434\u0435\u043b\u044b",children:(0,v.jsx)("div",{className:"slides-grid",children:(0,v.jsx)(y,{count:6})})}):c?(0,v.jsx)(a.A,{title:"\u0420\u0430\u0437\u0434\u0435\u043b\u044b",children:(0,v.jsx)("div",{className:"error",children:c})}):(0,v.jsxs)(a.A,{title:"\u0421\u043b\u0430\u0439\u0434\u044b",children:[(0,v.jsxs)("div",{className:"admin-content",children:[(0,v.jsx)("button",{className:"admin-add-button",onClick:()=>u(!0),children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043b\u0430\u0439\u0434"}),p?(0,v.jsx)("div",{className:"error",children:p}):(0,v.jsx)("div",{className:"slides-grid",children:t.map((e=>(0,v.jsx)(g,{id:e.id,title:e.name,status:e.status,img:`https://tiles.humanatlas.top/${e.id}/${e.id}_files/9/0_0.webp`,path:`/human-atlas/admin/slide/${e.id}`,onDelete:f},e.id)))})]}),d&&(0,v.jsx)(N,{onClose:()=>u(!1),onAddSlide:e=>{n((t=>[...t,e]))},categoryId:e})]})}},5784:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(5043),a=n(4524),s=n(7628),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},c=(0,s.J)("MoonLoader","100% {transform: rotate(360deg)}","moon");const l=function(e){var t=e.loading,n=void 0===t||t,s=e.color,l=void 0===s?"#000000":s,d=e.speedMultiplier,u=void 0===d?1:d,p=e.cssOverride,m=void 0===p?{}:p,h=e.size,f=void 0===h?60:h,v=o(e,["loading","color","speedMultiplier","cssOverride","size"]),g=(0,a.L)(f),x=g.value,y=g.unit,j=Math.round(x/7),b=i({display:"inherit",position:"relative",width:"".concat("".concat(x+2*j).concat(y)),height:"".concat("".concat(x+2*j).concat(y)),animation:"".concat(c," ").concat(.6/u,"s 0s infinite linear"),animationFillMode:"forwards"},m),N=function(e){return{width:(0,a.p)(e),height:(0,a.p)(e),borderRadius:"100%"}},w=i(i({},N(j)),{backgroundColor:"".concat(l),opacity:"0.8",position:"absolute",top:"".concat("".concat(x/2-j/2).concat(y)),animation:"".concat(c," ").concat(.6/u,"s 0s infinite linear"),animationFillMode:"forwards"}),O=i(i({},N(x)),{border:"".concat(j,"px solid ").concat(l),opacity:"0.1",boxSizing:"content-box",position:"absolute"});return n?r.createElement("span",i({style:b},v),r.createElement("span",{style:w}),r.createElement("span",{style:O})):null}},7628:(e,t,n)=>{n.d(t,{J:()=>r});var r=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return r;var a=document.createElement("style");document.head.appendChild(a);var s=a.sheet,i="\n    @keyframes ".concat(r," {\n      ").concat(t,"\n    }\n  ");return s&&s.insertRule(i,0),r}},4524:(e,t,n)=>{n.d(t,{L:()=>a,p:()=>s});var r={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function a(e){if("number"===typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var a=(e.match(/[^0-9]*$/)||"").toString();return r[a]?{value:t,unit:a}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function s(e){var t=a(e);return"".concat(t.value).concat(t.unit)}}}]);
//# sourceMappingURL=108.5de56795.chunk.js.map