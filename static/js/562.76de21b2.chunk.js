"use strict";(self.webpackChunkhuman_atlas=self.webpackChunkhuman_atlas||[]).push([[562],{2562:(e,s,r)=>{r.d(s,{A:()=>p});var a=r(5043),t=(r(5062),r(7950)),n=(r(6936),r(4545)),o=r(6654);var l=r(6065),i=r(579);function c(e){let{onClose:s,onLoginSuccess:r}=e;const[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[j,v]=(0,a.useState)(""),[b,N]=(0,a.useState)(""),[f,w]=(0,a.useState)({}),{showNotification:C}=(0,l.h)(),k=/^[a-z0-9_.]{1,64}$/,y=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,S=(e,s)=>{switch(e){case"loginUsername":u(s);break;case"loginPassword":g(s);break;case"registerName":x(s);break;case"registerUsername":v(s);break;case"registerPassword":N(s)}((e,s)=>{const r={...f};switch(e){case"loginUsername":case"registerUsername":s.trim()?k.test(s)?delete r[e]:r[e]="\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0435 \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b, \u0442\u043e\u0447\u043a\u0438 \u0438\u043b\u0438 \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u0438\u0432\u0430\u043d\u0438\u044f, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 64 \u0441\u0438\u043c\u0432\u043e\u043b\u0430":r[e]="\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e";break;case"loginPassword":s.trim()?delete r[e]:r[e]="\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d";break;case"registerPassword":s.trim()?y.test(s)?delete r[e]:r[e]="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b":r[e]="\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d";break;case"registerName":s.trim()?2!==s.trim().split(" ").length?r[e]="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044e \u0447\u0435\u0440\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b":delete r[e]:r[e]="\u0418\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b"}w(r)})(e,s)},A=async e=>{if(e.preventDefault(),!(Object.keys(f).length>0))try{const e=await async function(e,s,r){return await(0,o.A)("/v1/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s,name:r})})}(j,b,p);if(!e||e.error)return void C((null===e||void 0===e?void 0:e.error_message)||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438","error");const{user:a,accessToken:t}=e;r(a,t),C("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c","success"),s()}catch(a){C("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430","error")}};return t.createPortal((0,i.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&s(),children:(0,i.jsx)(n.A,{title:c?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0412\u0445\u043e\u0434",onClose:s,children:c?(0,i.jsxs)("form",{className:"registration-form",onSubmit:A,children:[(0,i.jsxs)("div",{className:"form-group "+(f.registerName?"error":""),children:[(0,i.jsx)("label",{htmlFor:"name",children:"\u0418\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044f"}),(0,i.jsx)("input",{id:"name",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",value:p,onChange:e=>S("registerName",e.target.value)}),f.registerName&&(0,i.jsx)("p",{className:"error-text",children:f.registerName})]}),(0,i.jsxs)("div",{className:"form-group "+(f.registerUsername?"error":""),children:[(0,i.jsx)("label",{htmlFor:"username",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,i.jsx)("input",{id:"username",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",value:j,onChange:e=>S("registerUsername",e.target.value)}),f.registerUsername&&(0,i.jsx)("p",{className:"error-text",children:f.registerUsername})]}),(0,i.jsxs)("div",{className:"form-group "+(f.registerPassword?"error":""),children:[(0,i.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,i.jsx)("input",{id:"password",type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:b,onChange:e=>S("registerPassword",e.target.value)}),f.registerPassword&&(0,i.jsx)("p",{className:"error-text",children:f.registerPassword})]}),(0,i.jsx)("button",{type:"submit",onClick:A,className:"submit-button",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),(0,i.jsxs)("p",{className:"switch-form-text",children:["\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"," ",(0,i.jsx)("button",{type:"button",className:"switch-form-button",onClick:()=>d(!1),children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):(0,i.jsxs)("form",{className:"login-form",onSubmit:async e=>{if(e.preventDefault(),!(Object.keys(f).length>0))try{const e=await async function(e,s){return await(0,o.A)("/v1/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})})}(m,h);if(!e||e.error)return void C((null===e||void 0===e?void 0:e.error_message)||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435","error");const{user:a,accessToken:t}=e;r(a,t),C("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438","success"),s()}catch(a){if("INVALID_CREDENTIALS"===a.message)return C("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c","error");C("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430","error")}},children:[(0,i.jsxs)("div",{className:"form-group "+(f.loginUsername?"error":""),children:[(0,i.jsx)("label",{htmlFor:"username",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,i.jsx)("input",{id:"username",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",value:m,onChange:e=>S("loginUsername",e.target.value)}),f.loginUsername&&(0,i.jsx)("p",{className:"error-text",children:f.loginUsername})]}),(0,i.jsxs)("div",{className:"form-group "+(f.loginPassword?"error":""),children:[(0,i.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,i.jsx)("input",{id:"password",type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:h,onChange:e=>S("loginPassword",e.target.value)}),f.loginPassword&&(0,i.jsx)("p",{className:"error-text",children:f.loginPassword})]}),(0,i.jsx)("button",{type:"submit",className:"submit-button",children:"\u0412\u043e\u0439\u0442\u0438"}),(0,i.jsxs)("p",{className:"switch-form-text",children:["\u041d\u0435\u0442\u0443 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"," ",(0,i.jsx)("button",{type:"button",className:"switch-form-button",onClick:()=>d(!0),children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})]})})}),document.getElementById("modal-root"))}var d=r(7509),m=r(1880);const u=r.p+"static/media/exit.4a2ad47bdae78d6701635e2bc65c8fe3.svg";const h=r.p+"static/media/profile.577bab8aab5fd4ddb481cf19da20e838.svg";var g=r(3216);function p(){const[e,s]=(0,a.useState)(!1),[r,t]=(0,a.useState)(null),[n,o]=(0,a.useState)(!1),[l,p]=(0,a.useState)(!1),x=(0,a.useRef)(null),j=(0,g.Zp)();(0,a.useEffect)((()=>{const e=m.A.get("user");if(e)try{const s=JSON.parse(e);t(s)}catch(s){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043a\u0443\u043a\u0438 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c:",s)}}),[]),(0,a.useEffect)((()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&o(!1)};return n?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[n]);return(0,i.jsxs)("div",{className:"navbar-wrapper",children:[(0,i.jsxs)("div",{className:"navbar-container",children:[(0,i.jsx)("div",{className:"navbar-logo",onClick:()=>{j("/human-atlas/")},children:"\u0413\u0438\u0441\u0442\u043e \u0410\u0442\u043b\u0430\u0441"}),(0,i.jsx)("ul",{className:"navbar-buttons",children:r?(0,i.jsxs)("div",{className:"profile-info",ref:x,children:[(0,i.jsx)("span",{onClick:()=>{o(!n)},className:"profile-name",children:r.firstName}),n&&(0,i.jsxs)("div",{className:"dropdown-menu",children:[(0,i.jsxs)("button",{className:"dropdown-item",children:[(0,i.jsx)("img",{src:h,alt:"profile"})," \u041f\u0440\u043e\u0444\u0438\u043b\u044c"]}),(0,i.jsxs)("button",{className:"dropdown-item red-text",onClick:()=>{p(!0)},children:[(0,i.jsx)("img",{src:u,alt:"exit"})," \u0412\u044b\u0439\u0442\u0438"]})]})]}):(0,i.jsx)("div",{className:"profile-button",children:(0,i.jsx)("button",{className:"login-button",onClick:()=>{s(!0)},children:"\u0412\u043e\u0439\u0442\u0438"})})})]}),e&&(0,i.jsx)(c,{onClose:()=>{s(!1)},onLoginSuccess:(e,r)=>{m.A.set("user",JSON.stringify(e),{secure:!0}),m.A.set("accessToken",r,{secure:!0}),t(e),s(!1),window.location.reload()}}),(0,i.jsx)(d.A,{isOpen:l,onClose:()=>{p(!1)},onConfirm:()=>{m.A.remove("user"),m.A.remove("accessToken"),t(null),o(!1),window.location.reload(),p(!1)},title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0432\u044b\u0445\u043e\u0434",message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?",actionName:"\u0412\u044b\u0439\u0442\u0438",actionColor:"red"})]})}},7509:(e,s,r)=>{r.d(s,{A:()=>n});r(5043);var a=r(4545),t=r(579);function n(e){let{isOpen:s,onClose:r,onConfirm:n,title:o,message:l,actionName:i,actionColor:c}=e;return s?(0,t.jsxs)(a.A,{title:o,onClose:r,children:[(0,t.jsx)("p",{children:l}),(0,t.jsxs)("div",{className:"modal-actions",children:[(0,t.jsx)("button",{className:"modal-button cancel-button",onClick:r,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,t.jsx)("button",{className:`modal-button confirm-button ${c}`,onClick:n,children:i})]})]}):null}},4545:(e,s,r)=>{r.d(s,{A:()=>t});r(5043),r(6936);var a=r(579);function t(e){let{title:s,children:r,onClose:t,className:n}=e;return(0,a.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target.classList.contains("modal-overlay")&&t()},children:(0,a.jsxs)("div",{className:`modal-container ${n||""}`,children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h2",{children:s}),(0,a.jsx)("button",{className:"close-button",onClick:t,children:"\u2715"})]}),(0,a.jsx)("div",{className:"modal-content",children:r})]})})}},6936:()=>{},5062:()=>{}}]);
//# sourceMappingURL=562.76de21b2.chunk.js.map